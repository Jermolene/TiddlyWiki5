title: $:/core/ui/ViewTemplate

\whitespace trim
\define folded-state()
$:/state/folded/$(currentTiddler)$
\end
\define focus-tiddler-actions(afterOrBefore)
<$set name="nextTiddler" value={{{ [list<tv-story-list>$afterOrBefore$<currentTiddler>] }}}>
<$set name="cssEscapedTitle" value={{{ [<nextTiddler>escapecss[]] }}}>
<$action-navigate $to=<<nextTiddler>>/>
<$action-sendmessage $message="tm-focus-selector" $param=<<get-focus-selector>> preventScroll="true"/>
</$set>
</$set>
\end
\define close-tiddler-actions()
<<if-last-tiddler-actions>>
<$action-sendmessage $message="tm-close-tiddler"/>
\end
\define cancel-delete-tiddler-actions(message)
<$list filter="[[$message$]match[cancel]]" variable="ignore">
<$list filter="[<currentTiddler>get[draft.of]!is[shadow]is[missing]]" variable="ignore">
<<if-last-tiddler-actions>>
</$list>
</$list>
<$list filter="[[$message$]match[delete]]" variable="ignore">
<<if-last-tiddler-actions>>
</$list>
<$action-sendmessage $message="tm-$message$-tiddler"/>
\end
\import [all[shadows+tiddlers]tag[$:/tags/Macro/View]!has[draft.of]]
\whitespace trim
<$keyboard key="((focus-next-tiddler))" actions=<<focus-tiddler-actions "after">> tag="div">
<$keyboard key="((focus-previous-tiddler))" actions=<<focus-tiddler-actions "before">>>
<$keyboard key="((edit-focus-tiddler))" actions="""<$action-sendmessage $message="tm-edit-tiddler"/>""">
<$keyboard key="((close-focus-tiddler))" actions=<<close-tiddler-actions>>>
<$vars storyTiddler=<<currentTiddler>> tiddlerInfoState=<<qualify "$:/state/popup/tiddler-info">>><div data-tiddler-title=<<currentTiddler>> data-tags={{!!tags}} class={{{ tc-tiddler-frame tc-tiddler-view-frame [<currentTiddler>is[tiddler]then[tc-tiddler-exists]] [<currentTiddler>is[missing]!is[shadow]then[tc-tiddler-missing]] [<currentTiddler>is[shadow]then[tc-tiddler-exists tc-tiddler-shadow]] [<currentTiddler>is[shadow]is[tiddler]then[tc-tiddler-overridden-shadow]] [<currentTiddler>is[system]then[tc-tiddler-system]] [{!!class}] [<currentTiddler>tags[]encodeuricomponent[]addprefix[tc-tagged-]] +[join[ ]] }}} tabindex={{$:/config/EditTabIndex}}>
<$list filter="[all[shadows+tiddlers]tag[$:/tags/ViewTemplate]!has[draft.of]]" variable="listItem"><$transclude tiddler=<<listItem>>/>
</$list>
</div>
</$vars>
</$keyboard>
</$keyboard>
</$keyboard>
</$keyboard>