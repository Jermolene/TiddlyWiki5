title: $:/snippets/LayoutSwitcher
tags: $:/tags/ControlPanel/Appearance
caption: {{$:/language/ControlPanel/LayoutSwitcher/Caption}}

\procedure layout-item()
\whitespace trim
<div class=<<cls>>>
	<$link to={{!!title}}>
		''<$transclude tiddler={{{ [<currentTiddler>get[icon]] }}}/><$transclude field="name"/>''&#32;-&#32;<$transclude field="description"/>
	</$link>
</div>
\end

\whitespace trim
<$linkcatcher to="$:/layout">
	<$keyboard key="((input-up))" actions=<<input-next-actions "before" "reverse[]">>>
		<$keyboard key="((input-down))" actions=<<input-next-actions>>>
			<div class="tc-chooser">
				<$list filter="[all[tiddlers+shadows]tag[$:/tags/Layout]] [[$:/core/ui/PageTemplate]] +[!is[draft]sort[name]]">
					<% if [{$:/layout}has[text]] %>
						<$set name="cls" filter="[all[current]field:title{$:/layout}]" value="tc-chooser-item tc-chosen" emptyValue="tc-chooser-item">
							<<layout-item>>
						</$set>
					<% else %>
						<$set name="cls" filter="[all[current]field:title[$:/core/ui/PageTemplate]]" value="tc-chooser-item tc-chosen" emptyValue="tc-chooser-item">
							<<layout-item>>
						</$set>
					<% endif %>
				</$list>
			</div>
		</$keyboard>
	</$keyboard>
</$linkcatcher>
