title: $:/core/macros/list-links-horizontal-draggable
tags: $:/tags/Macro $:/tags/Global

\whitespace trim
\procedure list-links-horizontal-draggable-caption()
<$let tv-wikilinks="no">
	<$transclude field="caption">
		<$view field="title"/>
	</$transclude>
</$let>
\end

\procedure list-links-horizontal-draggable(tiddler,field:"list",emptyMessage,type:"span",subtype:"span",class:"",itemTemplate,dragHandle:"yes")
	\procedure customSort() [<tiddler>get<field>enlist-input[]] :sort:alphanumeric:caseinsensitive[subfilter{$:/config/Tags/CustomSort/subfilter}]

<span class="tc-horizontal-draggable tc-tiny-gap-right">
	<$let targetTiddler=<<tiddler>> targetField=<<field>>>
		<$genesis $type=<<type>> class=<<class>>>
			<$list filter=<<customSort>> emptyMessage=<<emptyMessage>>>
				<$droppable
					actions=<<list-links-draggable-drop-actions>>
					tag=<<subtype>>
					enable=<<tv-enable-drag-and-drop>>
				>
					<span class="tc-horizontal-draggable-placeholder"/>
					<$draggable tiddler={{!!title}}
						enable={{{ [<dragHandle>match[yes]] }}}
						tag="span" class={{{ [<dragHandle>match[yes]then[tc-draggable-handle]] }}}
					>
					</$draggable>
					<$draggable tiddler={{!!title}}
						enable={{{ [<dragHandle>!match[yes]then[yes]] }}}
						tag="span" class="tc-horizontal-draggable-item tc-tiny-gap-right"
					>
						<% if [<itemTemplate>is[variable]] %>
							<$transclude $variable=<<itemTemplate>>>
								<<list-links-horizontal-draggable-caption>>
							</$transclude>
						<% else %>
							<$transclude $tiddler=<<itemTemplate>>>
								<<list-links-horizontal-draggable-caption>>
							</$transclude>
						<% endif %>
					</$draggable>
				</$droppable>
			</$list>
			<$tiddler tiddler="">
				<$droppable
					actions=<<list-links-draggable-drop-actions>>
					tag="span"
					enable=<<tv-enable-drag-and-drop>>
				>
					<span class="tc-horizontal-draggable-placeholder tc-horizontal-draggable-placeholder-end"></span>
				</$droppable>
			</$tiddler>
		</$genesis>
	</$let>
</span>
\end
